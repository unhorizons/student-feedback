"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[816],{7816:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var s,i,l,o,r,c,u,a,h=n(6599),m=n(4183),d=n.n(m);function p(t,e,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(t):s?s.value:e.get(t)}class f extends h.Qr{constructor(){super(...arguments),s.add(this)}initialize(){if(this.element.setAttribute("data-live-ignore",""),this.element.id){const t=document.querySelector(`label[for="${this.element.id}"]`);t&&t.setAttribute("data-live-ignore","")}}connect(){this.urlValue?this.tomSelect=p(this,s,"m",r).call(this,this.urlValue,this.minCharactersValue):this.optionsAsHtmlValue?this.tomSelect=p(this,s,"m",o).call(this):this.tomSelect=p(this,s,"m",l).call(this)}disconnect(){this.tomSelect.revertSettings.innerHTML=this.element.innerHTML,this.tomSelect.destroy()}get selectElement(){return this.element instanceof HTMLSelectElement?this.element:null}get formElement(){if(!(this.element instanceof HTMLInputElement||this.element instanceof HTMLSelectElement))throw new Error("Autocomplete Stimulus controller can only be used on an <input> or <select>.");return this.element}dispatchEvent(t,e){this.dispatch(t,{detail:e,prefix:"autocomplete"})}get preload(){return this.hasPreloadValue?"false"!=this.preloadValue&&("true"==this.preloadValue||this.preloadValue):"focus"}}s=new WeakSet,i=function(){const t={},e=!this.selectElement||this.selectElement.multiple;this.formElement.disabled||e||(t.clear_button={title:""}),e&&(t.remove_button={title:""}),this.urlValue&&(t.virtual_scroll={});const n={render:{no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},plugins:t,onItemAdd:()=>{this.tomSelect.setTextboxValue("")},onInitialize:function(){this.wrapper.setAttribute("data-live-ignore","")},closeAfterSelect:!0};return this.selectElement||this.urlValue||(n.shouldLoad=()=>!1),p(this,s,"m",u).call(this,n,this.tomSelectOptionsValue)},l=function(){const t=p(this,s,"m",u).call(this,p(this,s,"m",i).call(this),{maxOptions:this.selectElement?this.selectElement.options.length:50});return p(this,s,"m",a).call(this,t)},o=function(){const t=p(this,s,"m",u).call(this,p(this,s,"m",i).call(this),{maxOptions:this.selectElement?this.selectElement.options.length:50,score:t=>{const e=this.tomSelect.getScoreFunction(t);return t=>e(Object.assign(Object.assign({},t),{text:p(this,s,"m",c).call(this,t.text)}))},render:{item:function(t){return`<div>${t.text}</div>`},option:function(t){return`<div>${t.text}</div>`}}});return p(this,s,"m",a).call(this,t)},r=function(t,e){const n=p(this,s,"m",u).call(this,p(this,s,"m",i).call(this),{firstUrl:e=>{const n=t.includes("?")?"&":"?";return`${t}${n}query=${encodeURIComponent(e)}`},load:function(t,e){const n=this.getUrl(t);fetch(n).then((t=>t.json())).then((n=>{this.setNextUrl(t,n.next_page),e(n.results)})).catch((()=>e()))},shouldLoad:function(t){return t.length>=e},score:function(t){return function(t){return 1}},render:{option:function(t){return`<div>${t.text}</div>`},item:function(t){return`<div>${t.text}</div>`},no_more_results:()=>`<div class="no-more-results">${this.noMoreResultsTextValue}</div>`,no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},preload:this.preload});return p(this,s,"m",a).call(this,n)},c=function(t){return t.replace(/(<([^>]+)>)/gi,"")},u=function(t,e){return Object.assign(Object.assign({},t),e)},a=function(t){this.dispatchEvent("pre-connect",{options:t});const e=new(d())(this.formElement,t);return this.dispatchEvent("connect",{tomSelect:e,options:t}),e},f.values={url:String,optionsAsHtml:Boolean,noResultsFoundText:String,noMoreResultsText:String,minCharacters:{type:Number,default:3},tomSelectOptions:Object,preload:String}}}]);